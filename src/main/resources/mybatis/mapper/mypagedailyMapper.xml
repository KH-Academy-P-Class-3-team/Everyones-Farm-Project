<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="MYPAGEDAILY">

	<!-- 영농일지 리스트 등록 하기 -->
	<insert id="insertFarmdaily">
		insert into FARMING_DAILYLOG(
			  dailyLog_no
			 ,CONTENT
			 ,WORKING_AMOUNT
			 ,WORKING_TIME
			 ,WORKING_MEMBER
			 ,WORKING_DATE
			 ,WEATHER
			 ,RAIN
			 ,MAX_TEMP
			 ,MIN_TEMP
			 ,WRITE_DATE)
			 values
			 (
			 	farming_dailylog_seq.nextval
			 	,#{content}
			 	,#{workingAmount}
			 	,#{workingTime}
			 	,#{workingMember}
			 	,#{workingDate}
			 	,#{weather}
			 	,#{rain}
			 	,#{maxTemp}
			 	,#{minTemp}
			 	,sysdate
			  )
	</insert>
	
	<resultMap type="hashmap" id="date">
		<id property="dailylogNo" column="dailyLog_no" />
		<result property="content" column="CONTENT" />
		<result property="workingAmount" column="WORKING_AMOUNT" />
		<result property="workingTime" column="WORKING_TIME" />
		<result property="workingMember" column="WORKING_MEMBER" />
	</resultMap>
	
	<!-- 영농일지 리스트 순차적으로 나오게하기 -->
	<select id="list" resultMap="date">
	
	select dailyLog_no ,CONTENT,WORKING_AMOUNT,WORKING_TIME,WORKING_MEMBER,write_date
	
		FROM FARMING_DAILYLOG where to_char(write_date,'yyyymmdd') = #{date} ORDER BY dailyLog_no
		

	</select>
	
	<!-- 내일할일 체험명, 신청자이름, 인원 , 체험날짜 승인,체크 -->
	<!-- 영농일지 리스트 페이지 -->
	<select id = "listPage" resultType="common.dto.FarmingDailylog" parameterType="common.dto.page.Criteria">
		select dailyLog_no
			   ,CONTENT
			   ,WORKING_AMOUNT
			   ,WORKING_TIME
			   ,WORKING_MEMBER
			   ,WRITE_DATE
		from (
   		select 
       			dailyLog_no
			   ,CONTENT
			   ,WORKING_AMOUNT
			   ,WORKING_TIME
			   ,WORKING_MEMBER
			   ,WRITE_DATE
			   , row_number() over(order by dailyLog_no desc) as rNum
    	from FARMING_DAILYLOG ) mp
    		where rNum between #{rowStart} and #{rowEnd}
   				 order by dailyLog_no desc
	</select>
	
	<!-- 목록보여지게 하기 -->
	<select id="read" parameterType="int" resultType="common.dto.FarmingDailylog">
	select dailyLog_no
		   ,CONTENT
		   ,WORKING_AMOUNT
		   ,WORKING_TIME
		   ,WORKING_MEMBER
		   from FARMING_DAILYLOG
		   where dailyLog_no = #{dailylogNo}
	
	</select>
	
	<!-- 영농일지 리스트 총 페이지 수 -->
	<select id="listCount" resultType="int">
	<![CDATA[
		SELECT COUNT(dailyLog_no)
		  FROM FARMING_DAILYLOG
		 WHERE dailyLog_no > 0
	]]>
	</select>
</mapper>